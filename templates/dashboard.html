{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<h3>Add a Note</h3>
<form method="post" action="{{ url_for('add_note') }}">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" placeholder="Enter a title" required>
    <br><br>
    <label for="description">Description:</label>
    <input type="text" id="description" name="description" placeholder="Enter description (optional)">
    <br><br>
    <label for="status">Status:</label>
    <select id="status" name="status">
        <option value="To Do">To Do</option>
        <option value="In Progress">In Progress</option>
        <option value="Done">Done</option>
    </select>
    <br><br>
    <button type="submit">Add Note</button>
</form>

<h2>Your Notes</h2>
<div class="kanban-board">
    <!-- To Do Column -->
    <div class="kanban-column">
        <h3>To Do</h3>
        <ul>
            {% for note in notes if note[3] == 'To Do' %}
            <li class="kanban-card">
                <strong>{{ note[1] }}</strong>
                <p>{{ note[2] }}</p>
                <form method="POST" action="{{ url_for('edit_note', note_id=note[0]) }}">
                    <button type="submit">Edit</button>
                </form>
                <form method="POST" action="{{ url_for('delete_note', note_id=note[0]) }}">
                    <button type="submit">Delete</button>
                </form>
            </li>
            {% else %}
            <li>No notes in this category.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- In Progress Column -->
    <div class="kanban-column">
        <h3>In Progress</h3>
        <ul>
            {% for note in notes if note[3] == 'In Progress' %}
            <li class="kanban-card">
                <strong>{{ note[1] }}</strong>
                <p>{{ note[2] }}</p>
                <form method="POST" action="{{ url_for('edit_note', note_id=note[0]) }}">
                    <button type="submit">Edit</button>
                </form>
                <form method="POST" action="{{ url_for('delete_note', note_id=note[0]) }}">
                    <button type="submit">Delete</button>
                </form>
            </li>
            {% else %}
            <li>No notes in this category.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Done Column -->
    <div class="kanban-column">
        <h3>Done</h3>
        <ul>
            {% for note in notes if note[3] == 'Done' %}
            <li class="kanban-card">
                <strong>{{ note[1] }}</strong>
                <p>{{ note[2] }}</p>
                <form method="POST" action="{{ url_for('edit_note', note_id=note[0]) }}">
                    <button type="submit">Edit</button>
                </form>
                <form method="POST" action="{{ url_for('delete_note', note_id=note[0]) }}">
                    <button type="submit">Delete</button>
                </form>
            </li>
            {% else %}
            <li>No notes in this category.</li>
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}
